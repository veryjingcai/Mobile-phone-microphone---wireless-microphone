# 🎙️ Win11 WiFi 扩展话筒 (Web版)

一个基于 WebRTC 技术的单页 Web 应用，可以将您的手机（iOS/Android）变成 Windows 电脑的无线麦克风。

无需安装手机 App，无需配置复杂的服务器，只需在浏览器中打开网页即可连接。

## ✨ 主要功能

*   **零安装**：纯网页应用，手机和电脑只需通过浏览器访问同一个链接。
*   **低延迟**：使用 WebRTC 点对点 (P2P) 技术，音频直接在局域网内传输，不经过第三方服务器。
*   **Win11 风格**：精美的亚克力/毛玻璃 (Mica) UI 设计，完美融入 Windows 11 系统。
*   **隐私安全**：音频数据仅在您的设备间传输。
*   **可视化波形**：发送端和接收端均有音频波形动画，直观判断连接状态。

## 🚀 快速开始

**前提条件**：
1.  手机和电脑连接到同一个 WiFi（或局域网）。
2.  **必须使用 HTTPS 链接访问**（例如 GitHub Pages），否则手机浏览器无法获取麦克风权限。

### 第一步：建立连接

1.  **手机端**：
    *   打开网页链接。
    *   点击 **"我是手机"**。
    *   允许麦克风权限。
    *   点击 **"复制"** 此时生成的【连接代码 A】。
    *   *通过微信/QQ将代码发送给电脑。*

2.  **电脑端**：
    *   打开同一个网页链接。
    *   点击 **"我是电脑"**。
    *   在第一个文本框中粘贴手机发来的【连接代码 A】。
    *   点击 **"生成代码 B"**。
    *   复制生成的【连接代码 B】。
    *   *通过微信/QQ将代码发回给手机。*

3.  **回到手机端**：
    *   在底部的文本框粘贴电脑发来的【连接代码 B】。
    *   点击 **"连接电脑"**。

连接成功后，您对着手机说话，电脑的扬声器应该能直接听到声音。

---

## 🎧 进阶：如何作为系统麦克风使用 (QQ/会议/Discord)

默认情况下，网页会将声音从电脑扬声器播放出来。如果您想在聊天软件中使用手机作为麦克风，需要配合虚拟声卡软件。

**推荐方案：使用 VB-Audio Cable (免费)**

1.  下载并安装 **[VB-Audio Cable](https://vb-audio.com/Cable/)** (Windows/Mac)。
2.  **设置网页输出**：
    *   在 Windows 系统设置 -> 系统 -> 声音 -> 音量合成器。
    *   找到您的浏览器（如 Edge/Chrome），将其 **"输出设备"** 改为 `CABLE Input`。
3.  **设置聊天软件输入**：
    *   打开您的软件（如 腾讯会议、Discord、OBS）。
    *   在音频设置中，将 **"麦克风/输入设备"** 选择为 `CABLE Output`。

现在，网页接收到的声音就会直接“流”进您的聊天软件里了，且不会从扬声器播放出来（避免回音）。

## ❓ 常见问题 (FAQ)

**Q: 手机提示 `Cannot read properties of undefined (reading 'getUserMedia')`？**
A:这是浏览器安全策略。**必须使用 HTTPS 协议**访问网页。如果您是本地打开 HTML 文件或使用 HTTP IP 访问，浏览器会禁用麦克风。请将网页托管到 GitHub Pages 或 Vercel 等支持 HTTPS 的平台。

**Q: 为什么需要复制粘贴代码？不能自动连接吗？**
A: 为了实现“无服务器”架构。通常 WebRTC 需要一个后台信令服务器来交换连接信息。为了让这个网页能作为一个独立的 HTML 文件运行（没有任何后端），我们需要人工手动完成这个“信令交换”过程。

**Q: 有回音怎么办？**
A: 如果您没有使用耳机，且没有使用 VB-Cable，电脑发出的声音会被手机麦克风再次收录，产生啸叫。建议电脑端佩戴耳机，或者按上述教程配置 VB-Audio Cable。

## 📷 新功能：WiFi 摄像头

现已支持将手机摄像头作为电脑摄像头使用。

1.  在网页顶部导航栏切换到 **"扩展摄像头"**。
2.  连接步骤与麦克风模式相同。
3.  **如何作为系统摄像头使用**：
    *   电脑端接收画面后，点击全屏。
    *   使用 **OBS Studio** 抓取该浏览器窗口。
    *   在 OBS 中开启 **"启动虚拟摄像机 (Start Virtual Camera)"**。
    *   在 Zoom/Teams 中选择 "OBS Virtual Camera" 即可。

## 🛠️ 技术栈

*   **HTML5 & JavaScript (ES6)**
*   **WebRTC**: 用于音视频流传输 (RTCPeerConnection)。
*   **Tailwind CSS**: 用于 UI 样式。
*   **Web Audio API**: 用于音频可视化波形。

---
*Designed for productivity and simplicity.*
